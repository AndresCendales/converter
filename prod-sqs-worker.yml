version: '3.8'

services:
  worker:
    build:
      context: .
      dockerfile: worker_sqs/Dockerfile
    environment:
      PYTHONUNBUFFERED: 1
      DSN: postgresql://app_usr:app_pwd_1234@converter-db.crrcdkkacufx.us-east-1.rds.amazonaws.com:5432/converter
      NOTIFICATION_ENDPOINT: https://hooks.slack.com/services/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
      LIMIT_PROCESSING_TEST: 600
      AWS_ACCESS_KEY_ID: ASIAZLPHUOXOIJ2KCPHZ
      AWS_SECRET_ACCESS_KEY: im82qCqZ5Pj42bPdigctstxDHkYdArVZXuQQ9/JX
      AWS_SESSION_TOKEN: FwoGZXIvYXdzEFcaDHPwNs0keUdj/dF62yLMAe47JgL2iuvKQk+SLobDkR/CjXcgyuNplXywL6XfwLPtDjX0MBOdDZVSRXPMw/PCTkGEzs0FBwzKahCq1k2pSFg9U6O7WkyK88Fcd/ATf0nBy27DR7lel/+CCVNf+T3+7sVQkSGhBPcLdxx0RRq16Qh3UEahbT+Rz2AWQ63YXUnhMdxK8zMc0sf4Sb0t4KLCUfWY2qejIs7TDFZdqSPXqj0D2Pc8zQQlrjkbA+HW2E60ntN8aoiT0RtFv9BMBrsPrOKmoImGK1Z0YO7wsij53J+NBjItMIepZmfv+yWzSpuzawVBeTkiSkwS7T90vkyQ/ljAYXxtCxBeyMIcxhX+/dGT
    volumes:
      - type: bind
        source: ./logs
        target: /queue/logs
      - type: bind
        source: ./files
        target: /queue/files